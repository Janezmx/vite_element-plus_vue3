import{s as e,l as a,o as t,k as s,t as l,v as o,n as r,u as i}from"./element-plus-9c2b417e.js";import{D as p,r as u,w as n,c as m,R as g,o as d,W as v,s as c,f as j,a as f,P as y,I as z,u as h,L as _,a4 as b}from"./@vue-6c75e83b.js";import{o as x}from"./vue-router-1d03852f.js";import{f as S}from"./list-c552f6e3.js";import{u as N}from"./index-dc888efd.js";import"./dayjs-4d0ffb58.js";import"./@vueuse-89c89079.js";import"./@element-plus-a1466eed.js";import"./@ctrl-91de2ec7.js";import"./lodash-es-aaa217f4.js";import"./async-validator-8d480e59.js";import"./@popperjs-0e77d79c.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-500438c6.js";import"./pinia-6423bbc2.js";import"./vue-demi-71ba0ef2.js";import"./axios-a540c308.js";import"./pinia-plugin-persistedstate-3ffd75ad.js";import"./moment-b265113e.js";const C={style:{"text-align":"center",margin:"10px 0"}},q=p({__name:"Pagination",props:{total:{type:Number,default:0},layout:{type:String,required:!1,default:"total, sizes, prev, pager, next, jumper"},size:{type:Number,required:!1,default:10},sizes:{type:Array,required:!1,default:()=>[10,20,50,100,500,1e3]}},emits:["change"],setup(a,{emit:t}){const s=a,l=u(1),o=u(s.total),r=u(s.size);n(r,(e=>{console.log("watch",e,r,o)})),n(o,(e=>{const a=e%r.value==0?e/r.value:Math.floor(e/r.value)+1;0===a?1!==l.value&&i(1):l.value>a&&i(a)}));const i=e=>{l.value=e,t("change",{pageSize:r,pageNo:e})},p=e=>{r.value=e,l.value=1,t("change",{pageSize:e,pageNo:1})};return(t,s)=>{const u=e;return d(),m("div",C,[g(u,{onSizeChange:p,onCurrentChange:i,"current-page":l.value,"page-sizes":a.sizes,"page-size":r.value,layout:a.layout,total:o.value},null,8,["current-page","page-sizes","page-size","layout","total"])])}}}),w={class:"breadcrumb"},k=f("hr",null,null,-1),V=f("div",null,[b("本页总阅读量"),f("span",{id:"busuanzi_value_page_pv"}),b("次")],-1),L={style:{margin:"10px 0"}},P={class:"pagination"},R=p({__name:"List",setup(e){const{Global:p}=N(),n=u(!1),C=u(""),R=u([]),U=()=>{n.value=!0,S().then((e=>{R.value=e.data||[]})).catch((e=>{p.$message({type:"error",message:e.message})})).finally((()=>{n.value=!1}))},A=v({pageNo:1,pageSize:10}),B=({pageNo:e,pageSize:a})=>{A.pageNo=e,A.pageSize=a},D=c((()=>{const e=(A.pageNo-1)*A.pageSize;return R.value.slice(e,e+A.pageSize)}));return j((()=>{U()})),x(((e,a)=>{console.log("onBeforeRouteUpdate")})),(e,p)=>{const u=r,v=a,c=t,j=s,x=i,S=l,N=q,A=o;return d(),m(_,null,[f("div",w,[g(v,{separator:">"},{default:y((()=>[g(u,null,{default:y((()=>[b("列表")])),_:1})])),_:1})]),k,V,z((d(),m("div",null,[f("div",L,[g(c,{modelValue:C.value,"onUpdate:modelValue":p[0]||(p[0]=e=>C.value=e),style:{width:"200px"}},null,8,["modelValue"]),g(j,{type:"primary",onClick:U,style:{"margin-left":"10px"}},{default:y((()=>[b("查询")])),_:1})]),g(S,{data:h(D),border:""},{default:y((()=>[g(x,{label:"id",prop:"id"}),g(x,{label:"名称",prop:"name"})])),_:1},8,["data"]),f("div",P,[g(N,{ref:"pagination",onChange:B,total:R.value.length},null,8,["total"])])])),[[A,n.value]])],64)}}});export{R as default};
