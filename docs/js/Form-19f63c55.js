import{l as e,m as a,v as l,n as s,o as r,p as t,q as m,r as o,k as u}from"./element-plus-9c2b417e.js";import{s as i}from"./list-c552f6e3.js";import{u as p}from"./index-dc888efd.js";import{D as n,r as d,W as f,c as j,a as g,R as c,P as v,I as b,O as _,L as h,a4 as y,o as k}from"./@vue-6c75e83b.js";import"./dayjs-4d0ffb58.js";import"./@vueuse-89c89079.js";import"./@element-plus-a1466eed.js";import"./@ctrl-91de2ec7.js";import"./lodash-es-aaa217f4.js";import"./async-validator-8d480e59.js";import"./@popperjs-0e77d79c.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-500438c6.js";import"./pinia-6423bbc2.js";import"./vue-demi-71ba0ef2.js";import"./vue-router-1d03852f.js";import"./axios-a540c308.js";import"./pinia-plugin-persistedstate-3ffd75ad.js";import"./moment-b265113e.js";const V={class:"breadcrumb"},x=g("hr",null,null,-1),w=g("div",null,[y("本页总阅读量"),g("span",{id:"busuanzi_value_page_pv"}),y("次")],-1),q=n({__name:"Form",setup(n){const{Global:q}=p(),$=d(!1),z=f({name:"",remark:"",tag:[]}),U=f({tag:[{required:!0,message:"请选择标签",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"},{validator:(e,a,l)=>{if(a){if(!a.match(/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/))return l(new Error("只能输入中文、英文字母、数字和下划线"));l()}else l(new Error("请输入名称"))},trigger:"blur"}]}),E=d(null),R=()=>{E.value.validate((async e=>{if(e&&e){$.value=!0;const{name:e,tag:a,remark:l}=z,s={name:e,tag:a.join(","),remark:l};i(s).then((()=>{q.$message({type:"success",message:"提交成功"})})).catch((e=>{q.$message({type:"error",message:`提交失败，原因：${e.message}`})})).finally((()=>{$.value=!1}))}}))};return(i,p)=>{const n=s,d=e,f=r,q=t,A=m,C=o,D=u,F=a,G=l;return k(),j(h,null,[g("div",V,[c(d,{separator:">"},{default:v((()=>[c(n,null,{default:v((()=>[y("表单")])),_:1})])),_:1})]),x,w,b((k(),_(F,{ref_key:"formRef",ref:E,model:z,"label-width":"120px",rules:U},{default:v((()=>[c(q,{label:"名字",prop:"name"},{default:v((()=>[c(f,{modelValue:z.name,"onUpdate:modelValue":p[0]||(p[0]=e=>z.name=e),modelModifiers:{trim:!0},style:{width:"215px"}},null,8,["modelValue"])])),_:1}),c(q,{label:"标签",prop:"tag"},{default:v((()=>[c(C,{modelValue:z.tag,"onUpdate:modelValue":p[1]||(p[1]=e=>z.tag=e),"collapse-tags":"",multiple:"",filterable:"",placeholder:"请选择"},{default:v((()=>[c(A,{label:"作业",value:"job"}),c(A,{label:"任务",value:"task"}),c(A,{label:"进程",value:"process"})])),_:1},8,["modelValue"])])),_:1}),c(q,{label:"备注",prop:"remark"},{default:v((()=>[c(f,{modelValue:z.remark,"onUpdate:modelValue":p[2]||(p[2]=e=>z.remark=e),type:"textarea",style:{width:"215px"}},null,8,["modelValue"])])),_:1}),c(q,null,{default:v((()=>[c(D,{type:"primary",onClick:R},{default:v((()=>[y("确认")])),_:1}),c(D,null,{default:v((()=>[y("取消")])),_:1})])),_:1})])),_:1},8,["model","rules"])),[[G,$.value]])],64)}}});export{q as default};
