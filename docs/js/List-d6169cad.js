import{s as e,g as a,l as t,o as s,k as l,t as o,v as r,n as i,u as p}from"./element-plus-8e6384e1.js";import{D as u,r as n,w as m,c as g,R as d,o as v,W as c,s as j,e as f,a as y,P as z,I as h,u as x,L as S,a4 as b}from"./@vue-61e82e68.js";import{o as N}from"./vue-router-5d7048cc.js";import{f as _}from"./list-348cf6d5.js";import"./dayjs-4d0ffb58.js";import"./@vueuse-2e722466.js";import"./@ctrl-91de2ec7.js";import"./lodash-es-aaa217f4.js";import"./async-validator-8d480e59.js";import"./@popperjs-0e77d79c.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-500438c6.js";import"./index-50e1bd19.js";import"./pinia-23eb96b6.js";import"./vue-demi-71ba0ef2.js";import"./@element-plus-17b7322c.js";import"./axios-a540c308.js";import"./pinia-plugin-persistedstate-3ffd75ad.js";import"./moment-b265113e.js";const C={style:{"text-align":"center",margin:"10px 0"}},q=u({__name:"Pagination",props:{total:{type:Number,default:0},layout:{type:String,required:!1,default:"total, sizes, prev, pager, next, jumper"},size:{type:Number,required:!1,default:10},sizes:{type:Array,required:!1,default:()=>[10,20,50,100,500,1e3]}},emits:["change"],setup(a,{emit:t}){const s=a,l=n(1),o=n(s.total),r=n(s.size);m(r,(e=>{console.log("watch",e,r,o)})),m(o,(e=>{const a=e%r.value==0?e/r.value:Math.floor(e/r.value)+1;0===a?1!==l.value&&i(1):l.value>a&&i(a)}));const i=e=>{l.value=e,t("change",{pageSize:r,pageNo:e})},p=e=>{r.value=e,l.value=1,t("change",{pageSize:e,pageNo:1})};return(t,s)=>{const u=e;return v(),g("div",C,[d(u,{onSizeChange:p,onCurrentChange:i,"current-page":l.value,"page-sizes":a.sizes,"page-size":r.value,layout:a.layout,total:o.value},null,8,["current-page","page-sizes","page-size","layout","total"])])}}}),w={class:"breadcrumb"},k=y("hr",null,null,-1),V={style:{margin:"10px 0"}},L={class:"pagination"},P=u({__name:"List",setup(e){const u=n(!1),m=n(""),C=n([]),P=()=>{u.value=!0,_().then((e=>{C.value=e.data||[]})).catch((e=>{a.error(e.message)})).finally((()=>{u.value=!1}))},R=c({pageNo:1,pageSize:10}),U=({pageNo:e,pageSize:a})=>{R.pageNo=e,R.pageSize=a},A=j((()=>{const e=(R.pageNo-1)*R.pageSize;return C.value.slice(e,e+R.pageSize)}));return f((()=>{P()})),N(((e,a)=>{console.log("onBeforeRouteUpdate")})),(e,a)=>{const n=i,c=t,j=s,f=l,N=p,_=o,R=q,B=r;return v(),g(S,null,[y("div",w,[d(c,{separator:">"},{default:z((()=>[d(n,null,{default:z((()=>[b("列表")])),_:1})])),_:1})]),k,h((v(),g("div",null,[y("div",V,[d(j,{modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=e=>m.value=e),style:{width:"200px"}},null,8,["modelValue"]),d(f,{type:"primary",onClick:P,style:{"margin-left":"10px"}},{default:z((()=>[b("查询")])),_:1})]),d(_,{data:x(A),border:""},{default:z((()=>[d(N,{label:"id",prop:"id"}),d(N,{label:"名称",prop:"name"})])),_:1},8,["data"]),y("div",L,[d(R,{ref:"pagination",onChange:U,total:C.value.length},null,8,["total"])])])),[[B,u.value]])],64)}}});export{P as default};
