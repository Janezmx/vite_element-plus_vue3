import{l as e,m as a,v as l,g as r,n as s,o as t,p as o,q as m,r as u,k as i}from"./element-plus-8e6384e1.js";import{s as p}from"./list-348cf6d5.js";import{D as d,r as n,W as f,c as j,a as c,R as g,P as v,I as b,O as _,L as h,o as k,a4 as y}from"./@vue-61e82e68.js";import"./dayjs-4d0ffb58.js";import"./@vueuse-2e722466.js";import"./@ctrl-91de2ec7.js";import"./lodash-es-aaa217f4.js";import"./async-validator-8d480e59.js";import"./@popperjs-0e77d79c.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-500438c6.js";import"./index-50e1bd19.js";import"./pinia-23eb96b6.js";import"./vue-demi-71ba0ef2.js";import"./@element-plus-17b7322c.js";import"./vue-router-5d7048cc.js";import"./axios-a540c308.js";import"./pinia-plugin-persistedstate-3ffd75ad.js";import"./moment-b265113e.js";const V={class:"breadcrumb"},x=c("hr",null,null,-1),w=d({__name:"Form",setup(d){const w=n(!1),q=f({name:"",remark:"",tag:[]}),U=f({tag:[{required:!0,message:"请选择标签",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"},{validator:(e,a,l)=>{if(a){if(!a.match(/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/))return l(new Error("只能输入中文、英文字母、数字和下划线"));l()}else l(new Error("请输入名称"))},trigger:"blur"}]}),z=n(null),E=()=>{z.value.validate((async e=>{if(e&&e){w.value=!0;const{name:e,tag:a,remark:l}=q,s={name:e,tag:a.join(","),remark:l};p(s).then((()=>{r.success("提交成功")})).catch((e=>{r.error(`提交失败，原因：${e.message}`)})).finally((()=>{w.value=!1}))}}))};return(r,p)=>{const d=s,n=e,f=t,R=o,$=m,A=u,C=i,D=a,F=l;return k(),j(h,null,[c("div",V,[g(n,{separator:">"},{default:v((()=>[g(d,null,{default:v((()=>[y("表单")])),_:1})])),_:1})]),x,b((k(),_(D,{ref_key:"formRef",ref:z,model:q,"label-width":"120px",rules:U},{default:v((()=>[g(R,{label:"名字",prop:"name"},{default:v((()=>[g(f,{modelValue:q.name,"onUpdate:modelValue":p[0]||(p[0]=e=>q.name=e),modelModifiers:{trim:!0},style:{width:"215px"}},null,8,["modelValue"])])),_:1}),g(R,{label:"标签",prop:"tag"},{default:v((()=>[g(A,{modelValue:q.tag,"onUpdate:modelValue":p[1]||(p[1]=e=>q.tag=e),"collapse-tags":"",multiple:"",filterable:"",placeholder:"请选择"},{default:v((()=>[g($,{label:"作业",value:"job"}),g($,{label:"任务",value:"task"}),g($,{label:"进程",value:"process"})])),_:1},8,["modelValue"])])),_:1}),g(R,{label:"备注",prop:"remark"},{default:v((()=>[g(f,{modelValue:q.remark,"onUpdate:modelValue":p[2]||(p[2]=e=>q.remark=e),type:"textarea",style:{width:"215px"}},null,8,["modelValue"])])),_:1}),g(R,null,{default:v((()=>[g(C,{type:"primary",onClick:E},{default:v((()=>[y("确认")])),_:1}),g(C,null,{default:v((()=>[y("取消")])),_:1})])),_:1})])),_:1},8,["model","rules"])),[[F,w.value]])],64)}}});export{w as default};
