import{l as e,m as a,v as l,g as r,n as s,o as t,p as m,q as o,r as u,k as i}from"./element-plus-8e6384e1.js";import{s as p}from"./list-a0a56441.js";import{u as n}from"./index-e24beb39.js";import{D as d,r as f,W as j,c,a as g,R as v,P as b,I as _,O as h,L as k,ag as y,u as V,o as x,a4 as w,T as q,v as U}from"./@vue-61e82e68.js";import"./dayjs-4d0ffb58.js";import"./@vueuse-2e722466.js";import"./@ctrl-91de2ec7.js";import"./lodash-es-aaa217f4.js";import"./async-validator-8d480e59.js";import"./@popperjs-0e77d79c.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-500438c6.js";import"./pinia-23eb96b6.js";import"./vue-demi-71ba0ef2.js";import"./@element-plus-17b7322c.js";import"./vue-router-5d7048cc.js";import"./axios-a540c308.js";import"./pinia-plugin-persistedstate-3ffd75ad.js";import"./moment-b265113e.js";const z={class:"breadcrumb"},E=g("hr",null,null,-1),R=d({__name:"Form",setup(d){const R=U(n),$=f(!1),A=j({name:"",remark:"",tag:[]}),C=j({tag:[{required:!0,message:"请选择标签",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"},{validator:(e,a,l)=>{if(a){if(!a.match(/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/))return l(new Error("只能输入中文、英文字母、数字和下划线"));l()}else l(new Error("请输入名称"))},trigger:"blur"}]}),D=f(null),F=()=>{D.value.validate((async e=>{if(e&&e){$.value=!0;const{name:e,tag:a,remark:l}=A,s={name:e,tag:a.join(","),remark:l};p(s).then((()=>{r.success("提交成功")})).catch((e=>{r.error(`提交失败，原因：${e.message}`)})).finally((()=>{$.value=!1}))}}))};return(r,p)=>{const n=s,d=e,f=t,j=m,U=o,I=u,L=i,M=a,O=l;return x(),c(k,null,[g("div",z,[v(d,{separator:">"},{default:b((()=>[v(n,null,{default:b((()=>[w("表单")])),_:1})])),_:1})]),E,_((x(),h(M,{ref_key:"formRef",ref:D,model:A,"label-width":"120px",rules:C},{default:b((()=>[v(j,{label:"名字",prop:"name"},{default:b((()=>[v(f,{modelValue:A.name,"onUpdate:modelValue":p[0]||(p[0]=e=>A.name=e),modelModifiers:{trim:!0},style:{width:"215px"}},null,8,["modelValue"])])),_:1}),v(j,{label:"标签",prop:"tag"},{default:b((()=>[v(I,{modelValue:A.tag,"onUpdate:modelValue":p[1]||(p[1]=e=>A.tag=e),"collapse-tags":"",multiple:"",filterable:"",placeholder:"请选择"},{default:b((()=>[v(U,{label:"作业",value:"job"}),v(U,{label:"任务",value:"task"}),v(U,{label:"进程",value:"process"})])),_:1},8,["modelValue"])])),_:1}),v(j,{label:"备注",prop:"remark"},{default:b((()=>[v(f,{modelValue:A.remark,"onUpdate:modelValue":p[2]||(p[2]=e=>A.remark=e),type:"textarea",style:{width:"215px"}},null,8,["modelValue"])])),_:1}),v(j,null,{default:b((()=>[v(L,{type:"primary",onClick:F},{default:b((()=>[w("确认")])),_:1}),v(L,null,{default:b((()=>[w("取消")])),_:1})])),_:1})])),_:1},8,["model","rules"])),[[O,$.value]]),(x(!0),c(k,null,y(V(R),(e=>(x(),c("div",{key:e.name},q(e.name),1)))),128))],64)}}});export{R as default};
